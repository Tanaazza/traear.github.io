(function(){var n="0.2.1",t,e="undefined",a=25,r=parseInt(1e3/a),o=t,i={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"523",instanceID:"externalConf###Instanceid"},c=function(n){return typeof n!==e},u="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=c(window[u])&&1==window[u];var d=function(){return s.instanceID},f="_HistatsCounterGraphics_",l,h=function(){return f+s.counterID},m=function(n){return!("string"!=typeof n||""==n)},p=function(){try{s.DEBUG_MODE&&c(console)&&console.log.apply(this,arguments)}catch(n){}},v=function(e,a){var i=e||{};try{var u=function(n){var t="autostart";return"undefined"!=typeof n[t]&&n[t]===!0},d={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:u(i),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},f=function(){return d.INSTANCE_ID},m=100,v=1,g=function(){return a.document},b=function(n){return c(n)&&!!g().getElementById(n)},A=function(n){o=a.setTimeout(n,r)},w=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||A,T=a["Date"]||{},I=function(n,t){for(var e in n)t.hasOwnProperty(e)&&(t[e]=n[e])};i.getInstanceID=f;var C=h();i.IS_HISTATS_CANVAS=!0,i.globalObjectName=C,i.$window=a;var S=function(n){return b(n)?g().getElementById(n):t},N={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},x={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:t,customization:{}},E={domCanvasObject:null,canvas2dContext:null,canvasProperties:N},O=function(){var n={},e=n.hasOwnProperty,a=0,r=0,o={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},i=function(t){return e.call(n,t)},s=function(t){return o.printMessages&&console.log(f(),"addTopic",t),r++,o.topicsCount++,r>50&&p(f(),"Lot of topics registered!",t),n[t]=[]},c=function(t){return n[t]},u=function(t,e,r){o.printMessages&&console.log(f(),"subscribe",t,e,r),o.recordMessages&&o.messageLog.push(["subscribe",t,e,r]),r=r||m,i(t)||s(t);var u=c(t).push({callback:e,priority:e})-1;return a++,o.subscribersCount++,a>50&&p(f(),"Lot of topics registered!",t),{remove:function(){delete n[t][u]}}},d=function(n,t){var e="no-topic-found";n!=e&&l(e,{topic:n,info:t})},l=function(e,a){if(o.messagePassedCount++,o.printMessages&&console.log(f(),"publish",e,a),o.recordMessages&&o.messageLog.push(["publish",e,a]),!o.blockMessages)return i(e)?(n[e].slice().sort(function(n,t){return n.priority-t.priority}).forEach(function(n){n.callback(a!=t?a:{})}),void 0):(d(e,a),void 0)},h=function(n,t){w(function(){l(n,t)})};return{subscribe:u,publish:l,publishAsync:h,debugObj:o}}(),_=function(){return s.counterID},M=function(){var n="siteId";return i[n]=i[n]||0},y=function(){var n="main_div_name";return i[n]||"histats_counter_"+M()+"_"+_()},F=[],k=function(){return l=y(),l},R=function(){return k()+"_canvas"},U=function(){return"http://www.histats.com/viewstats/?sid="+M()+"&ccid="+_()},P=function(){a.location=U()},D=function(){if(1==E.canvasProperties.doMouseOverOut){var n=z().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}z().domCanvasObject.style.cursor="pointer"},L=function(){if(1==E.canvasProperties.doMouseOverOut){var n=z().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},Y=function(){var n=z(),t=n.canvasProperties,e=n.canvas2dContext;e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.shadowBlur=t.shadowBlur,e.shadowColor="rgba(0,0,0,0.2)"},B=function(){return S(k())},G=function(){var n=!!B();return n},Z=function(){try{if(!G())return O.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=B(),t=z().canvasProperties,e='<canvas id="'+R()+'" width="'+t.w+'" height="'+t.h+'" ></canvas>',r='<a href="'+U()+'" target="_blank">'+e+"</a>";n.innerHTML=r,z().domCanvasObject=S(R());var o=z().domCanvasObject;z().canvas2dContext=o.getContext("2d"),"addEventListener"in a?(o.addEventListener("mouseover",function(){D()}),o.addEventListener("mouseout",function(){L()})):o.onclick=function(){P()}}catch(i){p(f(),"drawCanvas",i)}},H=function(){try{if(d.ANIMATION_STARTED)return;if(d._STOPPED)return;O.publish("draw-callback-requested-reconfiguration",{}),O.publish("starting_pre",{context:i}),d.ANIMATION_STARTED=!0,O.publish("started",{context:i}),O.publish("drawcanvas_pre",{context:i}),Z(),O.publish("drawcanvas_post",{context:i}),X(),O.publish("animationLoop_started",{context:i})}catch(n){p(f(),"startNow",n,n.message)}},V=function(n,t,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent?t.attachEvent("on"+n,e):t[n]=e},j=function(){try{O.publish("appendedStart",{context:i,type:"animFrame"}),w(H)}catch(n){p(f(),"startAsap",n.message,n)}},Q=function(n,t){F.push({name:n,callback:t})},W=function(){},q=function(){F.forEach(function(n){n.callback(i.getCanvas2dContext(),x,z())})},J=function(){c(o)&&a.clearTimeout(o)},X=function(){d._STOPPED||w(function(){tn(q),d.ANIMATION_RUNNING_STATUS&&X()})};O.subscribe("setAnimationProperties",function(n){I(n,x)}),O.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){F.push({name:n.name,callback:n.cb,priority:n.priority})}),F=F.slice().sort(function(n,t){return n.priority-t.priority})}catch(t){p(f(),"animationLoop",t.message,t)}}),O.subscribe("configuration-changed",function(n){F=[],O.publish("draw-callback-requested-reconfiguration",{})});var K=function(n){var t=n!=d.ANIMATION_RUNNING_STATUS;return t&&(0==d.ANIMATION_RUNNING_STATUS&&1==n,1==d.ANIMATION_RUNNING_STATUS&&0==n&&J(),d.ANIMATION_RUNNING_STATUS=n),t},z=function(){return E},$=function(){var n=!1;0==x.frameCounter&&O.publish("FIRST-FRAME",{});var t=T.now(),e=t-x.msLastFrameDrawn;if(e>x.msPerFrame){var a=e%x.msPerFrame;x.msLastFrameDrawn=t-a,n=!0}return n},nn=function(){if(!(x.animation_duration_inFrames<1)){var n=x.animation_duration_inFrames+x.waitframesBetweenTwoAnimations;x.currentLoopFrame=x.frameCounter%n;var t=0==x.currentLoopFrame,e=x.currentLoopFrame>=x.animation_duration_inFrames;t&&(x.isInAnimationTransition=!0,O.publish("drawing-triggered-animation-start",x)),e&&x.isInAnimationTransition&&(x.isInAnimationTransition=!1,O.publish("drawing-triggered-animation-end",x))}},tn=function(n){var t=$();t&&(x.frameCounter++,nn(),n())},en=function(n){return n(i.getCanvas2dContext())},an=function(){var n=17,t=2,e=1,a=z().canvasProperties,r=0;a.hasShadow&&(r=r+t+e),a.hasLabel&&(a.h=a.h+n),a.w=a.w+r,a.h=a.h+r},rn=function(n){I(n,z().canvasProperties),an()};O.subscribe("setCanvasProperties",rn,10);var on=function(){i.onCanvas2dContext(function(n){var t=z().canvasProperties;n.clearRect(0,0,t.w,t.h),t.hasShadow&&Y()})};O.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,t){z().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},cn=function(n,e){e.autoTriggerTextChange_onFrame!==t&&e.currentLoopFrame==e.autoTriggerTextChange_onFrame&&O.publish("drawing-change-text",{})},un=function(n){O.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:cn,priority:5,name:"autoUpdateText"}]})};O.subscribe("draw-callback-requested-reconfiguration",un,15),i.__CODE_VERSION=n,i.getCanvasObject=z,i.getCanvas2dContext=function(){return z().canvas2dContext},i.onCanvas2dContext=en,i.getXYCanvas=function(){return{x:z().canvasProperties.xBase,y:z().canvasProperties.yBase}},i.addDrawCallback=Q,i.getCanvasProperties=function(){return z().canvasProperties},i.setCanvasProperties=function(n){for(var t in n)n.hasOwnProperty(t)&&(E.canvasProperties[t]=n[t])},i.updateCanvasProperties=function(n){i.setCanvasProperties(n(z().canvasProperties))},i.getAnimationFrames=function(){return x.frameCounter},i.getAnimationControl=function(){return x},i.setAnimationControl=function(n){for(var t in n)n.hasOwnProperty(t)&&(x[t]=n[t])},i.start=j,i.changeRunningStatus=K,i.getRunningStatus=function(){return d.ANIMATION_RUNNING_STATUS},i.eventBus=O,i.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.effectLightLine={},e=function(n,t){a.colorStops.push({position:n,colour:t})},a={x:0,y:0,width:0,height:0,colorStops:[]},r=function(n){var t=n.createLinearGradient(a.x,a.y,a.x+a.width,a.y);a.colorStops.forEach(function(n){t.addColorStop(n.position,n.colour)}),n.fillStyle=t,n.fillRect(a.x,a.y,a.width,a.height)};t.addColorStop=e,t.draw=r,t.getProperties=function(){return a},t.setProperties=function(n,t,e,r){a.x=n,a.y=t,a.width=e,a.height=r}}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e={main:"",source:t,loaded:!1};e.main="data:image/png;base64,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";var a=function(t){var a=e.source=new Image;a.onload=function(){e.loaded=!0,n.eventBus.publish("background-image-loaded",e),n.eventBus.publish("configuration-changed",{})},a.src=e.main};n.eventBus.subscribe("FIRST-FRAME",a,5),n.image_base64_src=e}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.counter={};e.ID="523",e.properties={w:70,h:20,hasShadow:!0};var a=!1,r={backgroundImageObject:t},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110};n.eventBus.publish("setCanvasProperties",e.properties),n.eventBus.publish("setAnimationProperties",o);var i={light:{x:0,y:0,w:20,h:20,movementsPerFrame:1,xStart:0,xEnd:60}},s=function(n){var t=i;t.light.movementsPerFrame=(i.light.xEnd-i.light.xStart)/o.animation_duration_inFrames};s(o.animation_duration_inFrames);var c=function(t){var e=i,a=n.getXYCanvas();e.light.x+=e.light.movementsPerFrame;var r=t.createLinearGradient(a.x+e.light.x,a.y+e.light.y,a.x+e.light.x+e.light.w,a.y+e.light.y);r.addColorStop(0,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(a.x+e.light.x,a.y+e.light.y,e.light.w,e.light.h)},u=function(t,e){n.eventBus.publish("clear-canvas-rectangle",{});var a=n.getXYCanvas();t.drawImage(r.backgroundImageObject.source,a.x,a.y)},d=function(n,t){var e=i;t.isInAnimationTransition?c(n):e.light.x=e.light.xStart},f=function(e){r.backgroundImageObject!=t&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:u,priority:10,name:"drawBackground"},{cb:d,priority:17,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",f,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(i),d.AUTOSTART&&i.start()}catch(dn){}return i},g="base.js",b=window,A="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=c(window[A])&&window[A]===!0,window[h()]=v,window["histats_canvascounters_"+g]=v}).call(this);